#!/bin/bash
#
# deleteKeyValueMap
# delete an environment Key/Value Map
#
# usage:
#   deleteKeyValueMap keyvaluemap_name
#
#Scoped to environment:
#$ curl -H "Content-Type:application/json" -X POST -d \
#{
#  "entry" : [ {
#    "name" : "dev",
#    "value" : "user1"
#  } ],
#  "name" : "prodmap"
#}
#-u myname:mypass https://api.enterprise.apigee.com/o/{org_name}/environments/{env_name}/keyvaluemaps
#

USAGE="keyvaluemap_name"
TOOLSDIR="${APITOOLS_HOME}"
. "${APITOOLS_HOME}/lib/functions"
parseCommandline "$@"
checkArgs 2

keyvaluemap_name="${ARGS[0]}"

names[0]="keyvaluemap_name"

URL="${APIGEE_HOST}/o/${ORGANIZATION}/environments/$ENVIRONMENT/keyvaluemaps/$keyvaluemap_name"

#cat ${APITOOLS_HOME}/data/createKeyValueMap.${FRMT} | bldBody "${names[0]}:${ARGS[1]}" > $APITOOLS_HOME/data/createKeyValueMap-body.${FRMT}

http_delete "$URL"

debug "Status Code [$STATUS_CODE]"

echo "$STATUS_CODE"

# if [[ $DEBUG -ge 3 ]] ; then
# 	debug "response is: \n$RESPONSE"
# elif  [[ $DEBUG -eq 0 ]] ; then
# 	echo $RESPONSE 
# fi
