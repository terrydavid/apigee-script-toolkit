#!/bin/bash

# getSFs
#
# lists the SFs contained in a given host
#
# usage:
#   getSFs host_alias

USAGE="# ouput is simple list"
TOOLSDIR="${APITOOLS_HOME}"
. "$TOOLSDIR/lib/functions"
parseCommandline "$@"
checkArgs 0

URL="${APIGEE_HOST}/o/${ORGANIZATION}/sharedflows"
debug "Retrieving SFs from ${URL}"

http_get "$URL"

if [ "$STATUS_CODE" != "200" ]; then
	fail "$(basename "$0") failed with status $STATUS_CODE: $RESPONSE"
fi

debug "Parsing: \n$RESPONSE" 

[[ $DEBUG -ge 2 ]] && set -x
if [ "$FRMT" = "json" ] ; then
	SFLIST=`echo "$RESPONSE" | sed -e 's/[",\[]//g' -e 's/\]//g'`
else
	SFLIST=`echo "$RESPONSE" | xmlValueOf "Item"`
fi

debug "SFLIST=$SFLIST"

echo $SFLIST

#for a in $SFLIST ; do printf "%b\n" $a | sed 's/\"//g' ; done
set -
